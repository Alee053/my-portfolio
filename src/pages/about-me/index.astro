---
import Background from '../../components/Background.svelte';
import BaseLayout from '../../layouts/BaseLayout.astro';
import AboutMe from '../../sections/AboutMe.svelte';
import LoadingHero from "../../components/LoadingHero.astro";
---

<BaseLayout title="About Me">
    <main class="relative z-10 opacity-0 transition-opacity duration-700 ease-out" id="main-content">
        <AboutMe client:load />
        <Background client:load/>
    </main>
    <LoadingHero/>
</BaseLayout>


<script is:inline>
    window.addEventListener('load', () => {
        const loadingScreen = document.getElementById('loading-screen');
        const mainContent = document.getElementById('main-content');

        const minDisplayTime = 100; // 1 second minimum display time for loading screen

        const pageLoadTime = performance.now();

        const hideLoadingScreen = () => {
            if (loadingScreen) {
                loadingScreen.style.opacity = '0';
                loadingScreen.addEventListener('transitionend', () => {
                    loadingScreen.remove(); // Remove from DOM after fading out
                    document.body.classList.remove('loading'); // Allow scrolling
                }, { once: true });
            }
            if (mainContent) {
                mainContent.style.opacity = '1';
            }
        };

        const timeElapsed = performance.now() - pageLoadTime;
        const timeToWait = Math.max(0, minDisplayTime - timeElapsed);

        setTimeout(hideLoadingScreen, timeToWait);
    });

    document.body.classList.add('loading');
</script>